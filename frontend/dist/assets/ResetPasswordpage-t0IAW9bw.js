import{a as r,j as e}from"./react-core-0npe00lJ.js";import{y as u,D as E}from"./react-icons-B--SyvS1.js";import{b as C,u as R,L as h}from"./react-router-lgh_Y1WM.js";import{n as S,B as x,f as B,s as I,l as g,A as w}from"./index-HjQGXCX9.js";import{I as f}from"./InputFields-CMQHEwPH.js";import"./react-dom-CdyVvfHO.js";import"./vendor-CGKUqG9W.js";import"./react-query-BvwtvcJK.js";import"./ui-libs-CuSWTeap.js";import"./zustand-Ccm-5Iud.js";import"./axios-B9ygI19o.js";function L(){const[o]=C(),j=R(),[i,v]=r.useState(""),[d,b]=r.useState(""),[p,t]=r.useState(""),[c,N]=r.useState(null),[n,y]=r.useState(null),{mutateAsync:P,isPending:m}=S();r.useEffect(()=>{const a=o.get("token"),s=o.get("email");!a||!s?t("Invalid or missing reset token. Please request a new password reset link."):(N(a),y(decodeURIComponent(s)))},[o]);const k=async a=>{if(a.preventDefault(),t(""),!i||!d){t("Please fill in all fields");return}if(i.length<8){t("Password must be at least 8 characters long");return}if(i!==d){t("Passwords do not match");return}if(!c||!n){t("Invalid reset token. Please request a new password reset link.");return}try{await P({token:c,email:n,password:i}),B("Password reset successfully! Redirecting to login..."),setTimeout(()=>{j("/login")},2e3)}catch(s){let l="Failed to reset password. Please try again.";s&&typeof s=="object"&&"response"in s?l=s.response?.data?.message||l:s instanceof Error&&(l=s.message),t(l),I(l)}};return!c||!n?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"border border-red-300 bg-red-50 p-4 rounded-lg",children:[e.jsx("p",{className:"text-sm text-red-700 font-medium",children:"Invalid or missing reset token"}),e.jsx("p",{className:"text-sm text-red-600 mt-2",children:"The password reset link is invalid or has expired. Please request a new password reset link."})]}),e.jsx(h,{to:"/login",children:e.jsx(x,{variant:"primary",className:"w-full",children:"Back to Login"})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-primary mb-2",children:"Reset Your Password"}),e.jsx("p",{className:"text-sm text-primary-50",children:"Enter your new password below"}),e.jsxs("p",{className:"text-xs text-primary-50 mt-2",children:["Email: ",n]})]}),e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx(f,{id:"reset-password",label:"New Password",type:"password",placeholder:"Enter your new password",value:i,onChange:a=>v(a.target.value),required:!0,icon:e.jsx(u,{className:"w-4 h-4"})}),e.jsx(f,{id:"reset-confirm-password",label:"Confirm New Password",type:"password",placeholder:"Confirm your new password",value:d,onChange:a=>b(a.target.value),required:!0,icon:e.jsx(u,{className:"w-4 h-4"})})]}),p&&e.jsx("div",{className:"border border-red-300 bg-red-50 p-3 rounded-lg shadow-sm",children:e.jsx("p",{className:"text-sm text-balance text-center text-red-700 font-medium",children:p})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{type:"submit",variant:"primary",className:"w-full",loading:m,disabled:m,children:"Reset Password"}),e.jsx(h,{to:"/login",children:e.jsx(x,{type:"button",variant:"outline",className:"w-full",disabled:m,children:"Back to Login"})})]})]}),e.jsx("div",{className:"bg-primary-10 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(E,{className:"text-primary shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-primary-75",children:[e.jsx("p",{className:"font-medium mb-1",children:"Password Requirements:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 text-xs",children:[e.jsx("li",{children:"At least 8 characters long"}),e.jsx("li",{children:"Use a combination of letters and numbers"}),e.jsx("li",{children:"Avoid using common words or personal information"})]})]})]})})]})}const O=()=>e.jsxs("div",{className:"min-h-screen flex w-full",children:[e.jsxs("div",{className:"hidden lg:flex lg:w-1/2 bg-gradient-to-br from-primary to-primary-75 items-center justify-center p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",children:e.jsx("div",{className:"absolute inset-0 animate-pattern-grid",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundSize:"60px 60px"}})}),e.jsx("div",{className:"absolute inset-0 opacity-15",children:e.jsx("div",{className:"absolute inset-0 animate-pattern-dots",style:{backgroundImage:"radial-gradient(circle at 2px 2px, rgba(255,255,255,0.5) 1px, transparent 0)",backgroundSize:"40px 40px",backgroundPosition:"20px 20px"}})}),e.jsxs("div",{className:"relative z-10 w-full text-center",children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsx("img",{src:g,alt:"BKeep Accounting Logo",className:"h-20 aspect-[3/4] bg-lightBg p-4 rounded-sm mb-8 drop-shadow-lg object-contain"})}),e.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"Reset Password"}),e.jsxs("p",{className:"text-lg text-white/90 mb-8",children:["Create a new secure password for your ",w," ","account"]}),e.jsxs("div",{className:"flex flex-col gap-4 text-white/80 text-sm",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60"}),e.jsx("span",{children:"Secure & Encrypted"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60"}),e.jsx("span",{children:"Password Reset Link"})]}),e.jsxs("div",{className:"flex items-center justify-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-white/60"}),e.jsx("span",{children:"One-Time Use Token"})]})]})]})]}),e.jsx("div",{className:"w-full lg:w-1/2 flex items-center justify-center bg-lightBg p-6 lg:p-12 overflow-auto min-h-screen",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden flex flex-col items-center mb-8",children:[e.jsx(h,{to:"/",children:e.jsx("img",{src:g,alt:"BKeep Accounting Logo",className:"h-16 w-auto mb-4"})}),e.jsx("h1",{className:"text-2xl font-bold text-primary mb-2",children:"Reset Password"}),e.jsx("p",{className:"text-sm text-primary-75 text-center",children:"Create a new secure password"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-6 lg:p-8 border border-primary-10",children:e.jsx(L,{})}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-xs text-primary-50 mt-2",children:["Â© ",new Date().getFullYear()," ",w,". All rights reserved."]})})]})})]});export{O as default};
